{% load static %}
{% load template_filters %}

<div id="{{id}}" class="overflow-auto search-height" style="transition: opacity 0.5s ease-out;">
    <div class="d-flex justify-content-center"><button id="btn_{{id}}" class="btn w-25 rounded-pill"><i
                class="bi bi-chevron-compact-up text-warning"></i></button></div>
    <ul style="border-radius: 30px;padding-left: 0;" class="border border-warning">
        <div class="my-2">
            {% if artist_brief.artist.likes_count %}<div
                class="text-secondary p-2 w-50 mx-auto text-center rounded-pill"
                style="font-weight: 400; background-color: #d3d3d3;">{{artist_brief.artist.likes_count}} likes
            </div> {% endif %}
        </div>
        <div class="my-1 d-flex justify-content-center ">
            <ul class="nav nav-pills mb-3 flex-nowrap overflow-x-auto" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link yellow rounded-pill active" id="pills-track-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-track-{{artist.id}}" type="button" role="tab" aria-controls="pills-track"
                        aria-selected="false">Tracks</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link yellow rounded-pill" id="pills-video-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-video-{{artist.id}}" type="button" role="tab" aria-controls="pills-video"
                        aria-selected="false">Videos</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link yellow rounded-pill" id="pills-album-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-album-{{artist.id}}" type="button" role="tab" aria-controls="pills-album"
                        aria-selected="true">Albums</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link yellow rounded-pill" id="pills-playlist-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-playlist-{{artist.id}}" type="button" role="tab"
                        aria-controls="pills-playlist" aria-selected="true">Playlists</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link yellow rounded-pill" id="pills-extras-tab" data-bs-toggle="pill"
                        data-bs-target="#pills-extras-{{artist.id}}" type="button" role="tab"
                        aria-controls="pills-extras" aria-selected="true">Extras</button>
                </li>
            </ul>
        </div>
        <div class="overflow-auto search-height">
            <div class="tab-content" id="pills-tabContent">

                <div class="tab-pane fade show active" id="pills-track-{{artist.id}}" role="tabpanel"
                    aria-labelledby="pills-track-tab" tabindex="0">
                    <ul class="list-group text-white">
                        {% for track in tracks %}
                        {% if forloop.last %}
                        {% if page %}
                        <div hx-post="{% url 'update_artist_tracks' id  page|add:1 %}" hx-trigger="intersect once"
                            hx-swap="afterend" hx-target="this" hx-indicator="#load_artist_new_track">
                        </div>
                        {% endif %}
                        {% else %}

                        <li class="list-group-item step rounded-pill">
                            <div class="d-flex justify-content-between">
                                <form hx-post="{% url 'track' track.id %}" hx-target="#player_console"
                                    hx-swap="innerHTML" hx-indicator="#load_track_{{track.id}}">
                                    <input type="hidden" name="tag" value="track"><input type="hidden" name="sub_tag"
                                        value="artist-tracks"><input type="hidden" name="page" value="{{page}}"><input
                                        type="hidden" name="tagId" value="{{id}}">
                                    <button type="submit">
                                        <div class="d-flex track">
                                            {% if track.cover_uri %}
                                            <img style="height: 50px; width: 50px; border-radius: 50%;"
                                                src="{{track.cover_uri|replace|extend}}" class="rounded-circle my-auto"
                                                alt="">{% else %}
                                            <img style="height: 50px; width: 50px; border-radius: 50%;"
                                                src="{{track.og_image|replace|extend}}" class="rounded-circle my-auto"
                                                alt="">{% endif %}
                                            <div class="my-auto ms-3 " style="text-align: left;">
                                                <div class="text-light text-state">
                                                    {{track.title}}
                                                </div>
                                                <div class="text-secondary text-state" style="font-weight: 400;">
                                                    {% for artist in track.artists %}{% if not forloop.last %}
                                                    {{artist.name}} , {% else %} {{artist.name}} {% endif %}
                                                    {% endfor %}
                                                </div>
                                            </div>

                                        </div>
                                    </button>
                                </form>
                                <div class="d-flex my-auto">
                                    {% if track.content_warning %}
                                    <div class="my-auto">
                                        <i class="bi bi-explicit"></i>
                                    </div>
                                    {% endif %}
                                    <div class="ms-2">
                                        <button id="btn_desc_{{track.id}}_artist_track" type="submit"><i
                                                id="icon_desc_{{track.id}}_artist_track"
                                                class="bi bi-three-dots-vertical text-light"
                                                style="font-size: 1.7rem;"></i></button>
                                    </div>
                                </div>
                            </div>

                            <!------------ TRACK CARD---------- -->

                            <div id="desc_{{track.id}}_artist_track" class="mx-auto my-auto mt-4 show-track-desc"
                                style="display: none; z-index: 99;">
                                <ul class="list-group text-white">
                                    <li class="list-group-item step rounded-pill mb-3">
                                        <div class="d-flex">
                                            {% if track.cover_uri %}
                                            <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                src="{{track.cover_uri|replace|extend}}" class="rounded-circle my-auto"
                                                alt="">{% else %}
                                            <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                src="{{track.og_image|replace|extend}}" class="rounded-circle my-auto"
                                                alt="">{% endif %}
                                            <div class="d-flex flex-column my-auto ms-3 " style="text-align: left;">
                                                <div class="d-flex">
                                                    <div class="text-light" style="font-size: medium;">
                                                        {{track.title}}
                                                    </div>
                                                    <div class="ms-2 my-auto">
                                                        {% if track.content_warning %}
                                                        <div>
                                                            <i class="bi bi-explicit"></i>
                                                        </div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="text-secondary" style="font-weight: 400;">
                                                    {% for artist in track.artists %}{% if not forloop.last %}
                                                    {{artist.name}} , {% else %} {{artist.name}} {% endif %}
                                                    {% endfor %} ‚óè {{track.duration_ms|to_mins_secs}}
                                                </div>
                                            </div>

                                        </div>
                                    </li>

                                    <ul class="list-group text-white">
                                        <div id="display_toggle_like_{{track.id}}_artist_track">
                                            <div class="d-flex">
                                                <div class="d-flex flex-column w-50 text-center">
                                                    <li class="list-group-item rounded-pill">
                                                        <form hx-post="{% url 'toggle_like' %}"
                                                            hx-target="#display_toggle_like_{{track.id}}_artist_track"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_toggle_like_{{track.id}}_artist_track">
                                                            <input type="hidden" name="tag" value="artist_like"><input
                                                                type="hidden" name="id" value="{{track.id}}"><input
                                                                type="hidden" name="location"
                                                                value="artist_track"><button type="submit"
                                                                class="btn w-100 rounded-pill"><span
                                                                    id="display_toggle_like_{{track.id}}_artist_track">{% if track.id|striptags in fav_tracks %}<i
                                                                        class="bi bi-heart text-warning me-2">{% else %}<i
                                                                            class="bi bi-heart text-light me-2">{% endif %}<span
                                                                                class="ms-2">Like</span></i></span></button>
                                                        </form>
                                                    </li>
                                                    <div id="load_new_toggle_like_{{track.id}}_artist_track"
                                                        class="htmx-indicator">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>
                                                <div class="d-flex flex-column w-50 text-center">
                                                    <li class="list-group-item rounded-pill">
                                                        <form hx-post="{% url 'toggle_like' %}"
                                                            hx-target="#display_toggle_like_{{track.id}}_artist_track"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_toggle_dislike_{{track.id}}_artist_track">
                                                            <input type="hidden" name="tag"
                                                                value="artist_dislike"><input type="hidden" name="id"
                                                                value="{{track.id}}"><input type="hidden"
                                                                name="location" value="artist_track"><button
                                                                type="submit" class="btn w-100 rounded-pill"><span
                                                                    id="display_toggle_like_{{track.id}}_artist_track"><i
                                                                        class="bi bi-heartbreak text-light me-2"><span
                                                                            class="ms-2">Dislike</span></i></span></button>
                                                        </form>
                                                    </li>
                                                    <div id="load_new_toggle_dislike_{{track.id}}_artist_track"
                                                        class="htmx-indicator">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <li class="list-group-item rounded-pill ">
                                            <form hx-post="{% url 'to_album' track.id %}"
                                                hx-target="#display_to_albums_{{track.id}}_artist_track"
                                                hx-swap="innerHTML"
                                                hx-indicator="#load_new_to_album_{{track.id}}_artist_track"><button
                                                    type="submit" class="btn w-100 text-start rounded-pill"><i
                                                        class="bi bi-vinyl text-light me-2"><span
                                                            class="ms-2">Album</span></i></button></form>
                                        </li>
                                        <div id="load_new_to_album_{{track.id}}_artist_track"
                                            class="htmx-indicator my-auto">
                                            <div class="text-center">
                                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="display_to_albums_{{track.id}}_artist_track">

                                        </div>
                                        <li class="list-group-item rounded-pill ">
                                            <form hx-post="{% url 'to_artist' track.id %}"
                                                hx-target="#display_to_artists_{{track.id}}_artist_track"
                                                hx-swap="innerHTML"
                                                hx-indicator="#load_new_to_artists_{{track.id}}_artist_track"><input
                                                    type="hidden" name="tag" value="track"><button type="submit"
                                                    class="btn w-100 text-start rounded-pill"><i
                                                        class="bi bi-mic text-light me-2"><span
                                                            class="ms-2">Artist</span></i></button></form>
                                        </li>
                                        <div id="load_new_to_artists_{{track.id}}_artist_track"
                                            class="htmx-indicator my-auto">
                                            <div class="text-center">
                                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="display_to_artists_{{track.id}}_artist_track">

                                        </div>
                                        <li class="list-group-item rounded-pill ">
                                            <form hx-post="{% url 'lyrics' track.id %}"
                                                hx-target="#display_lyrics_{{track.id}}_artist_track"
                                                hx-swap="innerHTML"
                                                hx-indicator="#load_new_lyrics_{{track.id}}_artist_track"><input
                                                    type="hidden" name="tag" value="track"><button type="submit"
                                                    class="btn w-100 text-start rounded-pill"><i
                                                        class="bi bi-body-text text-light me-2"><span
                                                            class="ms-2">Lyrics</span></i></button></form>
                                        </li>
                                        <div id="load_new_lyrics_{{track.id}}_artist_track"
                                            class="htmx-indicator my-auto">
                                            <div class="text-center">
                                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="display_lyrics_{{track.id}}_artist_track">

                                        </div>
                                        <li class="list-group-item rounded-pill ">
                                            <form hx-post="{% url 'add_tracks' track.id %}"
                                                hx-target="#display_add_tracks_{{track.id}}_artist_track"
                                                hx-swap="innerHTML"
                                                hx-indicator="#load_new_add_tracks_{{track.id}}_artist_track"><button
                                                    type="submit" class="btn w-100 text-start rounded-pill"><i
                                                        class="bi bi-plus-lg text-light me-2"><span
                                                            class="ms-2">Add</span></i></button></form>
                                        </li>
                                        <div id="load_new_add_tracks_{{track.id}}_artist_track"
                                            class="htmx-indicator my-auto">
                                            <div class="text-center">
                                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="display_add_tracks_{{track.id}}_artist_track">

                                        </div>
                                        <li class="list-group-item rounded-pill ">
                                            <form hx-post="{% url 'video' track.id %}"
                                                hx-target="#display_video_{{track.id}}_artist_track" hx-swap="innerHTML"
                                                hx-indicator="#load_new_video_{{track.id}}_artist_track"><button
                                                    type="submit" class="btn w-100 text-start rounded-pill"><i
                                                        class="bi bi-film text-light me-2"><span
                                                            class="ms-2">Video</span></i></button></form>
                                        </li>
                                        <div id="load_new_video_{{track.id}}_artist_track"
                                            class="htmx-indicator my-auto">
                                            <div class="text-center">
                                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="display_video_{{track.id}}_artist_track">

                                        </div>
                                    </ul>
                                </ul>
                            </div>

                            <script>
                                document.getElementById('btn_desc_{{track.id}}_artist_track').addEventListener("click",
                                    function () {
                                        if (document.getElementById('desc_{{track.id}}_artist_track').style
                                            .display === "none" && document.getElementById(
                                                'icon_desc_{{track.id}}_artist_track').classList.contains(
                                                "text-light")) {
                                            document.getElementById('desc_{{track.id}}_artist_track').style
                                                .display = "block";
                                            document.getElementById('icon_desc_{{track.id}}_artist_track').classList
                                                .remove("text-light");
                                            document.getElementById('icon_desc_{{track.id}}_artist_track').classList
                                                .add("text-warning");
                                        } else {
                                            document.getElementById('desc_{{track.id}}_artist_track').style
                                                .display = "none";
                                            document.getElementById('icon_desc_{{track.id}}_artist_track').classList
                                                .remove("text-warning");
                                            document.getElementById('icon_desc_{{track.id}}_artist_track').classList
                                                .add("text-light");
                                        }

                                    });
                            </script>


                            <!------------ END TRACK CARD---------- -->

                        </li>
                        <div id="load_track_{{track.id}}" class="htmx-indicator">
                            <div class="text-center">
                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>


                        {% endif %}
                        {% endfor %}
                    </ul>
                    <div id="load_artist_new_track" class="htmx-indicator">
                        <div class="text-center">
                            <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="tab-pane fade " id="pills-video-{{artist.id}}" role="tabpanel"
                    aria-labelledby="pills-video-tab" tabindex="0">
                    <ul class="list-group text-white">
                        {% for video in artist_brief.videos %}
                        <li class="list-group-item step rounded-pill">
                            <div class="d-flex justify-content-between">
                                <a href="{{video.embed_url}}" target="_blank" rel="noreferrer">
                                    <button type="submit">
                                        <div class="d-flex track-inner">
                                            {% if video.cover %}
                                            <img style="height: 50px; width: 50px; border-radius: 50%;"
                                                src="{{video.cover|replace}}" class="rounded-circle my-auto"
                                                alt="">{% else %}
                                            <img style="height: 50px; width: 50px; border-radius: 50%;"
                                                src="{{artist_brief.artist.cover.uri|replace|extend}}"
                                                class="rounded-circle my-auto" alt="">{% endif %}
                                            <div class="my-auto ms-3 " style="text-align: left;">
                                                <div class="text-light text-state">
                                                    {{video.title}}
                                                </div>
                                                <div class="text-secondary text-state" style="font-weight: 400;">
                                                    {% for artist in video.artists %}{% if not forloop.last %}
                                                    {{artist.name}} , {% else %} {{artist.name}} {% endif %}
                                                    {% endfor %}
                                                </div>
                                            </div>

                                        </div>
                                    </button>
                                </a>
                                <div class="d-flex my-auto">
                                    {% if video.explicit %}
                                    <div class="my-auto">
                                        <i class="bi bi-explicit"></i>
                                    </div>
                                    {% endif %}
                                    <div class="ms-2">
                                        <button type="submit"><i class="bi bi-three-dots-vertical text-light"
                                                style="font-size: 1.7rem;"></i></button>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <div id="load_artist_new_video" class="htmx-indicator">
                            <div class="text-center">
                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>

                        {% endfor %}



                    </ul>
                </div>



                <div class="tab-pane fade " id="pills-album-{{artist.id}}" role="tabpanel"
                    aria-labelledby="pills-album-tab" tabindex="0">
                    <ul class="list-group text-white">

                        {% for album in albums %}
                        {% if forloop.last %}
                        {% if page %}
                        <div hx-post="{% url 'update_artist_albums' id  page|add:1 %}" hx-trigger="intersect once"
                            hx-swap="afterend" hx-target="this" hx-indicator="#load_artist_new_album">
                        </div>
                        {% endif %}
                        {% else %}

                        <li class="list-group-item step rounded-pill">
                            <div class="d-flex justify-content-between">
                                <form hx-post="{% url 'album' album.id %}"
                                    hx-target="#display_album_{{album.id}}_artist_albums" hx-swap="innerHTML"
                                    hx-indicator="#load_new_{{album.id}}_artist_albums">
                                    <input type="hidden" name="tag" value="artist">
                                    <button class="w-100" type="submit">
                                        <div class="d-flex track">
                                            {% if album.cover_uri %}<img
                                                style="height: 50px; width: 50px; border-radius: 50%;"
                                                src="{{album.cover_uri|replace|extend}}" class="rounded-circle my-auto"
                                                alt="">{% else %}<img
                                                style="height: 50px; width: 50px; border-radius: 50%;"
                                                src="{{album.og_image|replace|extend}}" class="rounded-circle my-auto"
                                                alt="">{% endif %}<div class="d-flex flex-column ms-3 my-auto"
                                                style="text-align: left;">
                                                <div class="text-light text-state">{{album.title}}</div>
                                                <div class="text-secondary text-state" style="font-weight: 400;">
                                                    {% for artist in album.artists %}
                                                    {% if not forloop.last %} {{artist.name}} , {% else %}
                                                    {{artist.name}} {% endif %} {% endfor %} ¬∑ {{album.year}}
                                                    {% if album.type == None %} {% else %} ¬∑ {{album.type}} {% endif %}
                                                </div>
                                            </div>

                                        </div>
                                    </button>
                                </form>
                                <div class="d-flex my-auto">
                                    {% if album.content_warning == 'explicit' %}
                                    <div class="my-auto"><i class="bi bi-explicit"></i></div>
                                    {% endif %}
                                    <div class="ms-2">
                                        <button id="btn_desc_{{album.id}}_artist_album" type="submit"><i
                                                id="icon_desc_{{album.id}}_artist_album"
                                                class="bi bi-three-dots-vertical text-light"
                                                style="font-size: 1.7rem;"></i></button>
                                    </div>

                                </div>
                            </div>

                            <!------------ ALBUM CARD---------- -->

                            <div id="desc_{{album.id}}_artist_album" class="mx-auto my-auto mt-4 show-track-desc"
                                style="display: none; z-index: 99;">
                                <ul class="list-group text-white">
                                    <li class="list-group-item step rounded-pill mb-3">
                                        <div class="d-flex">
                                            {% if album.cover_uri %}
                                            <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                src="{{album.cover_uri|replace|extend}}" class="rounded-circle my-auto"
                                                alt="">{% else %}
                                            <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                src="{{album.og_image|replace|extend}}" class="rounded-circle my-auto"
                                                alt="">{% endif %}
                                            <div class="d-flex flex-column my-auto ms-3 " style="text-align: left;">
                                                <div class="d-flex">
                                                    <div class="text-light" style="font-size: medium;">
                                                        {{album.title}}
                                                    </div>
                                                    <div class="ms-2 my-auto">
                                                        {% if album.content_warning %}
                                                        <div>
                                                            <i class="bi bi-explicit"></i>
                                                        </div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="text-secondary" style="font-weight: 400;">
                                                    {% for artist in album.artists %}{% if not forloop.last %}
                                                    {{artist.name}} , {% else %} {{artist.name}} {% endif %}
                                                    {% endfor %} ‚óè {{album.year}}
                                                </div>
                                                <div class="text-secondary" style="font-weight: 400;">
                                                    {% if album.track_count == 1 %}{{album.track_count}} track
                                                    {%elif album.track_count > 1 %}{{album.track_count}}
                                                    tracks{% endif %}</div>
                                            </div>

                                        </div>
                                    </li>

                                    <ul class="list-group text-white">
                                        <div id="display_toggle_like_{{album.id}}_artist_album">
                                            <div class="d-flex">
                                                <div class="d-flex flex-column w-50 text-center">
                                                    <li class="list-group-item rounded-pill">
                                                        <form hx-post="{% url 'toggle_like' %}"
                                                            hx-target="#display_toggle_like_{{album.id}}_artist_album"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_toggle_like_{{album.id}}_artist_album">
                                                            <input type="hidden" name="tag" value="album_like"><input
                                                                type="hidden" name="id" value="{{album.id}}"><input
                                                                type="hidden" name="location"
                                                                value="artist_album"><button type="submit"
                                                                class="btn w-100 rounded-pill"><span
                                                                    id="display_toggle_like_{{album.id}}_artist_album">{% if album.id in fav_albums %}<i
                                                                        class="bi bi-heart text-warning me-2">{% else %}<i
                                                                            class="bi bi-heart text-light me-2">{% endif %}<span
                                                                                class="ms-2">Like</span></i></span></button>
                                                        </form>
                                                    </li>
                                                    <div id="load_new_toggle_like_{{album.id}}_artist_album"
                                                        class="htmx-indicator">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>
                                                <div class="d-flex flex-column w-50 text-center">
                                                    <li class="list-group-item rounded-pill">
                                                        <form hx-post="{% url 'toggle_like' %}"
                                                            hx-target="#display_toggle_like_{{album.id}}_artist_album"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_toggle_dislike_{{album.id}}_artist_album">
                                                            <input type="hidden" name="tag" value="album_dislike"><input
                                                                type="hidden" name="id" value="{{album.id}}"><input
                                                                type="hidden" name="location"
                                                                value="artist_album"><button type="submit"
                                                                class="btn w-100 rounded-pill"><span
                                                                    id="display_toggle_like_{{album.id}}_artist_album"><i
                                                                        class="bi bi-heartbreak text-light me-2"><span
                                                                            class="ms-2">Dislike</span></i></span></button>
                                                        </form>
                                                    </li>
                                                    <div id="load_new_toggle_dislike_{{album.id}}_artist_album"
                                                        class="htmx-indicator">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <li class="list-group-item rounded-pill ">
                                            <form hx-post="{% url 'to_artist' album.id %}"
                                                hx-target="#display_to_artists_{{album.id}}_artist_album"
                                                hx-swap="innerHTML"
                                                hx-indicator="#load_new_to_artists_{{album.id}}_artist_album"><input
                                                    type="hidden" name="tag" value="album"><button type="submit"
                                                    class="btn w-100 text-start rounded-pill"><i
                                                        class="bi bi-mic text-light me-2"><span
                                                            class="ms-2">Artist</span></i></button></form>
                                        </li>
                                        <div id="load_new_to_artists_{{album.id}}_artist_album"
                                            class="htmx-indicator my-auto">
                                            <div class="text-center">
                                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="display_to_artists_{{album.id}}_artist_album">

                                        </div>

                                    </ul>
                                </ul>
                            </div>

                            <script>
                                document.getElementById('btn_desc_{{album.id}}_artist_album').addEventListener("click",
                                    function () {
                                        if (document.getElementById('desc_{{album.id}}_artist_album').style
                                            .display === "none" && document.getElementById(
                                                'icon_desc_{{album.id}}_artist_album').classList.contains(
                                                "text-light")) {
                                            document.getElementById('desc_{{album.id}}_artist_album').style
                                                .display = "block";
                                            document.getElementById('icon_desc_{{album.id}}_artist_album').classList
                                                .remove("text-light");
                                            document.getElementById('icon_desc_{{album.id}}_artist_album').classList
                                                .add("text-warning");
                                        } else {
                                            document.getElementById('desc_{{album.id}}_artist_album').style
                                                .display = "none";
                                            document.getElementById('icon_desc_{{album.id}}_artist_album').classList
                                                .remove("text-warning");
                                            document.getElementById('icon_desc_{{album.id}}_artist_album').classList
                                                .add("text-light");
                                        }

                                    });
                            </script>


                            <!------------ END ALBUM CARD---------- -->
                        </li>
                        <div id="load_new_{{album.id}}_artist_albums" class="htmx-indicator">
                            <div class="text-center">
                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>
                        <div id="display_album_{{album.id}}_artist_albums">
                        </div>

                        {% endif %}
                        {% endfor %}

                    </ul>
                    <div id="load_artist_new_album" class="htmx-indicator">
                        <div class="text-center">
                            <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade " id="pills-playlist-{{artist.id}}" role="tabpanel"
                    aria-labelledby="pills-playlist-tab" tabindex="0">

                    <ul class="list-group text-white">
                        {% for playlist in artist_brief.playlists %}
                        <li class="list-group-item step rounded-pill">
                            <div class="d-flex justify-content-between">
                                <form hx-post="{% url 'playlist' playlist.uid playlist.kind %}"
                                    hx-target="#display_playlist_{{playlist.kind}}_{{forloop.counter}}"
                                    hx-swap="innerHTML" hx-indicator="#load_new_{{playlist.kind}}_{{forloop.counter}}">
                                    <input type="hidden" name="tag" value="artist_{{forloop.counter}}"><button
                                        class="w-100" type="submit">
                                        <div class="d-flex track">
                                            {% if playlist.cover.uri %}<img
                                                style="height: 50px; width: 50px; border-radius: 50%;"
                                                src="{{playlist.cover.uri|replace|extend}}"
                                                class="rounded-circle my-auto" alt="">{% else %}<img
                                                style="height: 50px; width: 50px; border-radius: 50%;"
                                                src="{{playlist.og_image|replace|extend}}"
                                                class="rounded-circle my-auto" alt="">{% endif %}<div
                                                class="d-flex flex-column ms-3 my-auto" style="text-align: left;">
                                                <div class=" text-light text-state">
                                                    {{playlist.title}}</div>
                                                <div class="text-secondary text-state" style="font-weight: 400;">
                                                    {{playlist.track_count}} tracks</div>
                                            </div>
                                        </div>
                                    </button></form>
                                <div class="d-flex my-auto">
                                    {% if playlist.content_warning == 'explicit' %}
                                    <div class="my-auto"><i class="bi bi-explicit"></i></div>
                                    {% endif %}
                                    <div class="ms-2">
                                        <button id="btn_desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist"
                                            type="submit"><i
                                                id="icon_desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist"
                                                class="bi bi-three-dots-vertical text-light"
                                                style="font-size: 1.7rem;"></i></button>
                                    </div>
                                </div>
                            </div>

                            <!------------ PLAYLIST CARD---------- -->

                            <div id="desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist"
                                class="mx-auto my-auto mt-4 show-track-desc" style="display: none; z-index: 99;">
                                <ul class="list-group text-white">
                                    <li class="list-group-item step rounded-pill mb-3">
                                        <div class="d-flex">
                                            {% if playlist.cover.uri %}
                                            <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                src="{{playlist.cover.uri|replace|extend}}"
                                                class="rounded-circle my-auto" alt="">{% else %}
                                            <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                src="{{playlist.og_image|replace|extend}}"
                                                class="rounded-circle my-auto" alt="">{% endif %}
                                            <div class="d-flex flex-column my-auto ms-3 " style="text-align: left;">
                                                <div class="d-flex">
                                                    <div class="text-light" style="font-size: medium;">
                                                        {{playlist.title}}
                                                    </div>
                                                    <div class="ms-2 my-auto">
                                                        {% if playlist.content_warning %}
                                                        <div>
                                                            <i class="bi bi-explicit"></i>
                                                        </div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="text-secondary" style="font-weight: 400;">

                                                    {{playlist.track_count}} tracks
                                                </div>
                                            </div>

                                        </div>

                                    </li>



                                    <ul class="list-group text-white">
                                        <div
                                            id="display_toggle_like_{{playlist.kind}}_{{forloop.counter}}_artist_playlist">
                                            <div class="d-flex">
                                                <div class="d-flex flex-column w-50 text-center">
                                                    <li class="list-group-item rounded-pill">
                                                        <form hx-post="{% url 'toggle_like' %}"
                                                            hx-target="#display_toggle_like_{{playlist.kind}}_{{forloop.counter}}_artist_playlist"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_toggle_like_{{playlist.kind}}_{{forloop.counter}}_artist_playlist">
                                                            <input type="hidden" name="tag" value="playlist_like"><input
                                                                type="hidden" name="id"
                                                                value="{{playlist.uid}}:{{playlist.kind}}"><input
                                                                type="hidden" name="location"
                                                                value="artist_playlist"><button type="submit"
                                                                class="btn w-100 rounded-pill"><span
                                                                    id="display_toggle_like_{{playlist.kind}}_{{forloop.counter}}_artist_playlist">
                                                                    {% if playlist.kind|join_var:playlist.uid in fav_playlists %}<i
                                                                        class="bi bi-heart text-warning me-2">{% else %}<i
                                                                            class="bi bi-heart text-light me-2">{% endif %}<span
                                                                                class="ms-2">Like</span></i></span></button>
                                                        </form>
                                                    </li>
                                                    <div id="load_new_toggle_like_{{playlist.kind}}_{{forloop.counter}}_artist_playlist"
                                                        class="htmx-indicator">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>
                                                <div class="d-flex flex-column w-50 text-center">
                                                    <li class="list-group-item rounded-pill">
                                                        <form hx-post="{% url 'toggle_like' %}"
                                                            hx-target="#display_toggle_like_{{playlist.kind}}_{{forloop.counter}}_artist_playlist"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_toggle_dislike_{{playlist.kind}}_{{forloop.counter}}_artist_playlist">
                                                            <input type="hidden" name="tag"
                                                                value="playlist_dislike"><input type="hidden" name="id"
                                                                value="{{playlist.uid}}:{{playlist.kind}}"><input
                                                                type="hidden" name="location"
                                                                value="artist_playlist"><button type="submit"
                                                                class="btn w-100 rounded-pill"><span
                                                                    id="display_toggle_like_{{playlist.kind}}_{{forloop.counter}}_artist_playlist"><i
                                                                        class="bi bi-heartbreak text-light me-2"><span
                                                                            class="ms-2">Dislike</span></i></span></button>
                                                        </form>
                                                    </li>
                                                    <div id="load_new_toggle_dislike_{{playlist.kind}}_{{forloop.counter}}_artist_playlist"
                                                        class="htmx-indicator">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                    </ul>
                                </ul>
                            </div>

                            <script>
                                document.getElementById(
                                        'btn_desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist')
                                    .addEventListener("click", function () {
                                        if (document.getElementById(
                                                'desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist').style
                                            .display === "none" && document.getElementById(
                                                'icon_desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist')
                                            .classList.contains("text-light")) {
                                            document.getElementById(
                                                    'desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist')
                                                .style.display = "block";
                                            document.getElementById(
                                                'icon_desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist'
                                                ).classList.remove("text-light");
                                            document.getElementById(
                                                'icon_desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist'
                                                ).classList.add("text-warning");
                                        } else {
                                            document.getElementById(
                                                    'desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist')
                                                .style.display = "none";
                                            document.getElementById(
                                                'icon_desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist'
                                                ).classList.remove("text-warning");
                                            document.getElementById(
                                                'icon_desc_{{playlist.kind}}_{{forloop.counter}}_artist_playlist'
                                                ).classList.add("text-light");
                                        }

                                    });
                            </script>


                            <!------------ END PLAYLIST CARD---------- -->
                        </li>
                        <div id="load_new_{{playlist.kind}}_{{forloop.counter}}" class="htmx-indicator">
                            <div class="text-center">
                                <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>
                        <div id="display_playlist_{{playlist.kind}}_{{forloop.counter}}">

                        </div>

                        {% endfor %}



                    </ul>

                    <div class="my-5">

                    </div>

                </div>


                <div class="tab-pane fade " id="pills-extras-{{artist.id}}" role="tabpanel"
                    aria-labelledby="pills-extras-tab" tabindex="0">

                    <div class="my-1 d-flex justify-content-center ">
                        <ul class="nav nav-pills mb-3 flex-nowrap overflow-x-auto" id="pills-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link yellow rounded-pill active" id="pills-popular_tracks-tab"
                                    data-bs-toggle="pill" data-bs-target="#pills-popular_tracks-{{artist.id}}"
                                    type="button" role="tab" aria-controls="pills-popular_tracks"
                                    aria-selected="false">Popular Tracks</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link yellow rounded-pill" id="pills-compilations-tab"
                                    data-bs-toggle="pill" data-bs-target="#pills-compilations-{{artist.id}}"
                                    type="button" role="tab" aria-controls="pills-compilations"
                                    aria-selected="false">Compilations</button>
                            </li>

                        </ul>
                    </div>

                    <div class="overflow-auto search-height">
                        <div class="tab-content" id="pills-tabContent">

                            <div class="tab-pane fade show active" id="pills-popular_tracks-{{artist.id}}"
                                role="tabpanel" aria-labelledby="pills-popular_tracks-tab" tabindex="0">

                                <ul class="list-group text-white">
                                    {% for track in artist_brief.popular_tracks %}
                                    <li class="list-group-item step rounded-pill">
                                        <div class="d-flex justify-content-between">
                                            <form hx-post="{% url 'track' track.id %}" hx-target="#player_console"
                                                hx-swap="innerHTML" hx-indicator="#load_track_{{track.id}}">
                                                <input type="hidden" name="tag" value="track"><input type="hidden"
                                                    name="sub_tag" value="artist-tracks"><input type="hidden"
                                                    name="tagId" value="{{id}}">
                                                <button type="submit">
                                                    <div class="d-flex track">
                                                        {% if track.cover_uri %}
                                                        <img style="height: 50px; width: 50px; border-radius: 50%;"
                                                            src="{{track.cover_uri|replace|extend}}"
                                                            class="rounded-circle my-auto" alt="">{% else %}
                                                        <img style="height: 50px; width: 50px; border-radius: 50%;"
                                                            src="{{track.og_image|replace|extend}}"
                                                            class="rounded-circle my-auto" alt="">{% endif %}
                                                        <div class="my-auto ms-3 " style="text-align: left;">
                                                            <div class="text-light text-state">
                                                                {{track.title}}
                                                            </div>
                                                            <div class="text-secondary text-state"
                                                                style="font-weight: 400;">
                                                                {% for artist in track.artists %}{% if not forloop.last %}
                                                                {{artist.name}} , {% else %} {{artist.name}} {% endif %}
                                                                {% endfor %}
                                                            </div>
                                                        </div>

                                                    </div>
                                                </button>
                                            </form>
                                            <div class="d-flex my-auto">
                                                {% if track.content_warning %}
                                                <div class="my-auto">
                                                    <i class="bi bi-explicit"></i>
                                                </div>
                                                {% endif %}
                                                <div class="ms-2">
                                                    <button id="btn_desc_{{track.id}}_artist_popular_track"
                                                        type="submit"><i
                                                            id="icon_desc_{{track.id}}_artist_popular_track"
                                                            class="bi bi-three-dots-vertical text-light"
                                                            style="font-size: 1.7rem;"></i></button>
                                                </div>
                                            </div>
                                        </div>

                                        <!------------ TRACK CARD---------- -->

                                        <div id="desc_{{track.id}}_artist_popular_track"
                                            class="mx-auto my-auto mt-4 show-track-desc"
                                            style="display: none; z-index: 99;">
                                            <ul class="list-group text-white">
                                                <li class="list-group-item step rounded-pill mb-3">
                                                    <div class="d-flex">
                                                        {% if track.cover_uri %}
                                                        <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                            src="{{track.cover_uri|replace|extend}}"
                                                            class="rounded-circle my-auto" alt="">{% else %}
                                                        <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                            src="{{track.og_image|replace|extend}}"
                                                            class="rounded-circle my-auto" alt="">{% endif %}
                                                        <div class="d-flex flex-column my-auto ms-3 "
                                                            style="text-align: left;">
                                                            <div class="d-flex">
                                                                <div class="text-light" style="font-size: medium;">
                                                                    {{track.title}}
                                                                </div>
                                                                <div class="ms-2 my-auto">
                                                                    {% if track.content_warning %}
                                                                    <div>
                                                                        <i class="bi bi-explicit"></i>
                                                                    </div>
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                            <div class="text-secondary" style="font-weight: 400;">
                                                                {% for artist in track.artists %}{% if not forloop.last %}
                                                                {{artist.name}} , {% else %} {{artist.name}} {% endif %}
                                                                {% endfor %} ‚óè {{track.duration_ms|to_mins_secs}}
                                                            </div>
                                                        </div>

                                                    </div>
                                                </li>

                                                <ul class="list-group text-white">
                                                    <div id="display_toggle_like_{{track.id}}_artist_popular_track">
                                                        <div class="d-flex">
                                                            <div class="d-flex flex-column w-50 text-center">
                                                                <li class="list-group-item rounded-pill">
                                                                    <form hx-post="{% url 'toggle_like' %}"
                                                                        hx-target="#display_toggle_like_{{track.id}}_artist_popular_track"
                                                                        hx-swap="innerHTML"
                                                                        hx-indicator="#load_new_toggle_like_{{track.id}}_artist_popular_track">
                                                                        <input type="hidden" name="tag"
                                                                            value="artist_like"><input type="hidden"
                                                                            name="id" value="{{track.id}}"><input
                                                                            type="hidden" name="location"
                                                                            value="artist_popular_track"><button
                                                                            type="submit"
                                                                            class="btn w-100 rounded-pill"><span
                                                                                id="display_toggle_like_{{track.id}}_artist_popular_track">{% if track.id|striptags in fav_tracks %}<i
                                                                                    class="bi bi-heart text-warning me-2">{% else %}<i
                                                                                        class="bi bi-heart text-light me-2">{% endif %}<span
                                                                                            class="ms-2">Like</span></i></span></button>
                                                                    </form>
                                                                </li>
                                                                <div id="load_new_toggle_like_{{track.id}}_artist_popular_track"
                                                                    class="htmx-indicator">
                                                                    <div class="text-center">
                                                                        <div class="spinner-grow text-warning spinner-grow-sm "
                                                                            role="status">
                                                                            <span
                                                                                class="visually-hidden">Loading...</span>
                                                                        </div>
                                                                    </div>
                                                                </div>


                                                            </div>
                                                            <div class="d-flex flex-column w-50 text-center">
                                                                <li class="list-group-item rounded-pill">
                                                                    <form hx-post="{% url 'toggle_like' %}"
                                                                        hx-target="#display_toggle_like_{{track.id}}_artist_popular_track"
                                                                        hx-swap="innerHTML"
                                                                        hx-indicator="#load_new_toggle_dislike_{{track.id}}_artist_popular_track">
                                                                        <input type="hidden" name="tag"
                                                                            value="artist_dislike"><input type="hidden"
                                                                            name="id" value="{{track.id}}"><input
                                                                            type="hidden" name="location"
                                                                            value="artist_popular_track"><button
                                                                            type="submit"
                                                                            class="btn w-100 rounded-pill"><span
                                                                                id="display_toggle_like_{{track.id}}_artist_popular_track"><i
                                                                                    class="bi bi-heartbreak text-light me-2"><span
                                                                                        class="ms-2">Dislike</span></i></span></button>
                                                                    </form>
                                                                </li>
                                                                <div id="load_new_toggle_dislike_{{track.id}}_artist_popular_track"
                                                                    class="htmx-indicator">
                                                                    <div class="text-center">
                                                                        <div class="spinner-grow text-warning spinner-grow-sm "
                                                                            role="status">
                                                                            <span
                                                                                class="visually-hidden">Loading...</span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <li class="list-group-item rounded-pill ">
                                                        <form hx-post="{% url 'to_album' track.id %}"
                                                            hx-target="#display_to_albums_{{track.id}}_artist_popular_track"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_to_album_{{track.id}}_artist_popular_track">
                                                            <button type="submit"
                                                                class="btn w-100 text-start rounded-pill"><i
                                                                    class="bi bi-vinyl text-light me-2"><span
                                                                        class="ms-2">Album</span></i></button></form>
                                                    </li>
                                                    <div id="load_new_to_album_{{track.id}}_artist_popular_track"
                                                        class="htmx-indicator my-auto">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div id="display_to_albums_{{track.id}}_artist_popular_track">

                                                    </div>
                                                    <li class="list-group-item rounded-pill ">
                                                        <form hx-post="{% url 'to_artist' track.id %}"
                                                            hx-target="#display_to_artists_{{track.id}}_artist_popular_track"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_to_artists_{{track.id}}_artist_popular_track">
                                                            <input type="hidden" name="tag" value="track"><button
                                                                type="submit"
                                                                class="btn w-100 text-start rounded-pill"><i
                                                                    class="bi bi-mic text-light me-2"><span
                                                                        class="ms-2">Artist</span></i></button></form>
                                                    </li>
                                                    <div id="load_new_to_artists_{{track.id}}_artist_popular_track"
                                                        class="htmx-indicator my-auto">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div id="display_to_artists_{{track.id}}_artist_popular_track">

                                                    </div>
                                                    <li class="list-group-item rounded-pill ">
                                                        <form hx-post="{% url 'lyrics' track.id %}"
                                                            hx-target="#display_lyrics_{{track.id}}_artist_popular_track"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_lyrics_{{track.id}}_artist_popular_track">
                                                            <button type="submit"
                                                                class="btn w-100 text-start rounded-pill"><i
                                                                    class="bi bi-body-text text-light me-2"><span
                                                                        class="ms-2">Lyrics</span></i></button></form>
                                                    </li>
                                                    <div id="load_new_lyrics_{{track.id}}_artist_popular_track"
                                                        class="htmx-indicator my-auto">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div id="display_lyrics_{{track.id}}_artist_popular_track">

                                                    </div>
                                                    <li class="list-group-item rounded-pill ">
                                                        <form hx-post="{% url 'add_tracks' track.id %}"
                                                            hx-target="#display_add_tracks_{{track.id}}_artist_popular_track"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_add_tracks_{{track.id}}_artist_popular_track">
                                                            <button type="submit"
                                                                class="btn w-100 text-start rounded-pill"><i
                                                                    class="bi bi-plus-lg text-light me-2"><span
                                                                        class="ms-2">Add</span></i></button></form>
                                                    </li>
                                                    <div id="load_new_add_tracks_{{track.id}}_artist_popular_track"
                                                        class="htmx-indicator my-auto">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div id="display_add_tracks_{{track.id}}_artist_popular_track">

                                                    </div>
                                                    <li class="list-group-item rounded-pill ">
                                                        <form hx-post="{% url 'video' track.id %}"
                                                            hx-target="#display_video_{{track.id}}_artist_popular_track"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_video_{{track.id}}_artist_popular_track">
                                                            <button type="submit"
                                                                class="btn w-100 text-start rounded-pill"><i
                                                                    class="bi bi-film text-light me-2"><span
                                                                        class="ms-2">Video</span></i></button></form>
                                                    </li>
                                                    <div id="load_new_video_{{track.id}}_artist_popular_track"
                                                        class="htmx-indicator my-auto">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div id="display_video_{{track.id}}_artist_popular_track">

                                                    </div>
                                                </ul>
                                            </ul>
                                        </div>

                                        <script>
                                            document.getElementById('btn_desc_{{track.id}}_artist_popular_track')
                                                .addEventListener("click", function () {
                                                    if (document.getElementById(
                                                            'desc_{{track.id}}_artist_popular_track').style
                                                        .display === "none" && document.getElementById(
                                                            'icon_desc_{{track.id}}_artist_popular_track').classList
                                                        .contains("text-light")) {
                                                        document.getElementById(
                                                                'desc_{{track.id}}_artist_popular_track').style
                                                            .display = "block";
                                                        document.getElementById(
                                                                'icon_desc_{{track.id}}_artist_popular_track')
                                                            .classList.remove("text-light");
                                                        document.getElementById(
                                                                'icon_desc_{{track.id}}_artist_popular_track')
                                                            .classList.add("text-warning");
                                                    } else {
                                                        document.getElementById(
                                                                'desc_{{track.id}}_artist_popular_track').style
                                                            .display = "none";
                                                        document.getElementById(
                                                                'icon_desc_{{track.id}}_artist_popular_track')
                                                            .classList.remove("text-warning");
                                                        document.getElementById(
                                                                'icon_desc_{{track.id}}_artist_popular_track')
                                                            .classList.add("text-light");
                                                    }

                                                });
                                        </script>


                                        <!------------ END TRACK CARD---------- -->

                                    </li>
                                    <div id="load_track_{{track.id}}" class="htmx-indicator">
                                        <div class="text-center">
                                            <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                        </div>
                                    </div>

                                    {% endfor %}
                                </ul>
                                <div id="load_artist_new_track" class="htmx-indicator">
                                    <div class="text-center">
                                        <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="tab-pane fade" id="pills-compilations-{{artist.id}}" role="tabpanel"
                                aria-labelledby="pills-compilations-tab" tabindex="0">


                                <ul class="list-group text-white">

                                    {% for album in artist_brief.also_albums %}
                                    <li class="list-group-item step rounded-pill">
                                        <div class="d-flex justify-content-between">
                                            <form hx-post="{% url 'album' album.id %}"
                                                hx-target="#display_album_{{album.id}}_artist_compilations"
                                                hx-swap="innerHTML"
                                                hx-indicator="#load_new_{{album.id}}_artist_compilations">
                                                <input type="hidden" name="tag" value="artist">
                                                <button class="w-100" type="submit">
                                                    <div class="d-flex track">
                                                        {% if album.cover_uri %}<img
                                                            style="height: 50px; width: 50px; border-radius: 50%;"
                                                            src="{{album.cover_uri|replace|extend}}"
                                                            class="rounded-circle my-auto" alt="">{% else %}<img
                                                            style="height: 50px; width: 50px; border-radius: 50%;"
                                                            src="{{album.og_image|replace|extend}}"
                                                            class="rounded-circle my-auto" alt="">{% endif %}<div
                                                            class="d-flex flex-column ms-3 my-auto"
                                                            style="text-align: left;">
                                                            <div class="text-light text-state">{{album.title}}</div>
                                                            <div class="text-secondary text-state"
                                                                style="font-weight: 400;">
                                                                {% for artist in album.artists %}
                                                                {% if not forloop.last %} {{artist.name}} , {% else %}
                                                                {{artist.name}} {% endif %} {% endfor %} ¬∑
                                                                {{album.year}} {% if album.type == None %} {% else %} ¬∑
                                                                {{album.type}} {% endif %}</div>
                                                        </div>

                                                    </div>
                                                </button>
                                            </form>
                                            <div class="d-flex my-auto">
                                                {% if album.content_warning == 'explicit' %}
                                                <div class="my-auto"><i class="bi bi-explicit"></i></div>
                                                {% endif %}
                                                <div class="ms-2">
                                                    <button id="btn_desc_{{album.id}}_artist_compilation"
                                                        type="submit"><i id="icon_desc_{{album.id}}_artist_compilation"
                                                            class="bi bi-three-dots-vertical text-light"
                                                            style="font-size: 1.7rem;"></i></button>
                                                </div>
                                            </div>
                                        </div>

                                        <!------------ ALBUM CARD---------- -->

                                        <div id="desc_{{album.id}}_artist_compilation"
                                            class="mx-auto my-auto mt-4 show-track-desc"
                                            style="display: none; z-index: 99;">
                                            <ul class="list-group text-white">
                                                <li class="list-group-item step rounded-pill mb-3">
                                                    <div class="d-flex">
                                                        {% if album.cover_uri %}
                                                        <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                            src="{{album.cover_uri|replace|extend}}"
                                                            class="rounded-circle my-auto" alt="">{% else %}
                                                        <img style="height: 100px; width: 100px; border-radius: 50%;"
                                                            src="{{album.og_image|replace|extend}}"
                                                            class="rounded-circle my-auto" alt="">{% endif %}
                                                        <div class="d-flex flex-column my-auto ms-3 "
                                                            style="text-align: left;">
                                                            <div class="d-flex">
                                                                <div class="text-light" style="font-size: medium;">
                                                                    {{album.title}}
                                                                </div>
                                                                <div class="ms-2 my-auto">
                                                                    {% if album.content_warning %}
                                                                    <div>
                                                                        <i class="bi bi-explicit"></i>
                                                                    </div>
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                            <div class="text-secondary" style="font-weight: 400;">
                                                                {% for artist in album.artists %}{% if not forloop.last %}
                                                                {{artist.name}} , {% else %} {{artist.name}} {% endif %}
                                                                {% endfor %} ‚óè {{album.year}}
                                                            </div>
                                                        </div>

                                                    </div>
                                                </li>

                                                <ul class="list-group text-white">
                                                    <div id="display_toggle_like_{{album.id}}_artist_compilation">
                                                        <div class="d-flex">
                                                            <div class="d-flex flex-column w-50 text-center">
                                                                <li class="list-group-item rounded-pill">
                                                                    <form hx-post="{% url 'toggle_like' %}"
                                                                        hx-target="#display_toggle_like_{{album.id}}_artist_compilation"
                                                                        hx-swap="innerHTML"
                                                                        hx-indicator="#load_new_toggle_like_{{album.id}}_artist_compilation">
                                                                        <input type="hidden" name="tag"
                                                                            value="album_like"><input type="hidden"
                                                                            name="id" value="{{album.id}}"><input
                                                                            type="hidden" name="location"
                                                                            value="artist_compilation"><button
                                                                            type="submit"
                                                                            class="btn w-100 rounded-pill"><span
                                                                                id="display_toggle_like_{{album.id}}_artist_compilation">{% if album.id in fav_albums %}<i
                                                                                    class="bi bi-heart text-warning me-2">{% else %}<i
                                                                                        class="bi bi-heart text-light me-2">{% endif %}<span
                                                                                            class="ms-2">Like</span></i></span></button>
                                                                    </form>
                                                                </li>
                                                                <div id="load_new_toggle_like_{{album.id}}_artist_compilation"
                                                                    class="htmx-indicator">
                                                                    <div class="text-center">
                                                                        <div class="spinner-grow text-warning spinner-grow-sm "
                                                                            role="status">
                                                                            <span
                                                                                class="visually-hidden">Loading...</span>
                                                                        </div>
                                                                    </div>
                                                                </div>


                                                            </div>
                                                            <div class="d-flex flex-column w-50 text-center">
                                                                <li class="list-group-item rounded-pill">
                                                                    <form hx-post="{% url 'toggle_like' %}"
                                                                        hx-target="#display_toggle_like_{{album.id}}_artist_compilation"
                                                                        hx-swap="innerHTML"
                                                                        hx-indicator="#load_new_toggle_dislike_{{album.id}}_artist_compilation">
                                                                        <input type="hidden" name="tag"
                                                                            value="album_dislike"><input type="hidden"
                                                                            name="id" value="{{album.id}}"><input
                                                                            type="hidden" name="location"
                                                                            value="artist_compilation"><button
                                                                            type="submit"
                                                                            class="btn w-100 rounded-pill"><span
                                                                                id="display_toggle_like_{{album.id}}_artist_compilation"><i
                                                                                    class="bi bi-heartbreak text-light me-2"><span
                                                                                        class="ms-2">Dislike</span></i></span></button>
                                                                    </form>
                                                                </li>
                                                                <div id="load_new_toggle_dislike_{{album.id}}_artist_compilation"
                                                                    class="htmx-indicator">
                                                                    <div class="text-center">
                                                                        <div class="spinner-grow text-warning spinner-grow-sm "
                                                                            role="status">
                                                                            <span
                                                                                class="visually-hidden">Loading...</span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <li class="list-group-item rounded-pill ">
                                                        <form hx-post="{% url 'to_artist' album.id %}"
                                                            hx-target="#display_to_artists_{{album.id}}_artist_compilation"
                                                            hx-swap="innerHTML"
                                                            hx-indicator="#load_new_to_artists_{{album.id}}_artist_compilation">
                                                            <input type="hidden" name="tag" value="album"><button
                                                                type="submit"
                                                                class="btn w-100 text-start rounded-pill"><i
                                                                    class="bi bi-mic text-light me-2"><span
                                                                        class="ms-2">Artist</span></i></button></form>
                                                    </li>
                                                    <div id="load_new_to_artists_{{album.id}}_artist_compilation"
                                                        class="htmx-indicator my-auto">
                                                        <div class="text-center">
                                                            <div class="spinner-grow text-warning spinner-grow-sm "
                                                                role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div id="display_to_artists_{{album.id}}_artist_compilation">

                                                    </div>

                                                </ul>
                                            </ul>
                                        </div>

                                        <script>
                                            document.getElementById('btn_desc_{{album.id}}_artist_compilation')
                                                .addEventListener("click", function () {
                                                    if (document.getElementById(
                                                            'desc_{{album.id}}_artist_compilation').style
                                                        .display === "none" && document.getElementById(
                                                            'icon_desc_{{album.id}}_artist_compilation').classList
                                                        .contains("text-light")) {
                                                        document.getElementById(
                                                                'desc_{{album.id}}_artist_compilation').style
                                                            .display = "block";
                                                        document.getElementById(
                                                                'icon_desc_{{album.id}}_artist_compilation')
                                                            .classList.remove("text-light");
                                                        document.getElementById(
                                                                'icon_desc_{{album.id}}_artist_compilation')
                                                            .classList.add("text-warning");
                                                    } else {
                                                        document.getElementById(
                                                                'desc_{{album.id}}_artist_compilation').style
                                                            .display = "none";
                                                        document.getElementById(
                                                                'icon_desc_{{album.id}}_artist_compilation')
                                                            .classList.remove("text-warning");
                                                        document.getElementById(
                                                                'icon_desc_{{album.id}}_artist_compilation')
                                                            .classList.add("text-light");
                                                    }

                                                });
                                        </script>


                                        <!------------ END ALBUM CARD---------- -->
                                    </li>
                                    <div id="load_new_{{album.id}}_artist_compilations" class="htmx-indicator">
                                        <div class="text-center">
                                            <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="display_album_{{album.id}}_artist_compilations">
                                    </div>

                                    {% endfor %}

                                </ul>
                                <div id="load_artist_new_album" class="htmx-indicator">
                                    <div class="text-center">
                                        <div class="spinner-grow text-warning spinner-grow-sm " role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </ul>
</div>





<script>
    document.getElementById('btn_{{id}}').addEventListener('click', () => {
        document.getElementById('{{id}}').classList.add('hide-drop');
        setTimeout(() => {
            document.getElementById('{{id}}').remove();
        }, 500);
    });
</script>